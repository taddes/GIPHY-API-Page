<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TADDES' GIPHY API PAGE</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/style/style.css">



</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="header">
                    <div class="page-header">
                        <h1>TADDES' GIF-TADSTIC GIF SITE!</h1>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="buttons">

                    <button data-topic="captain kirk">I'll be back</button>
                    <button data-topic="Michael J Fox">
                        My happiness grows in direct proportionto my acceptance, and in inverse proportion to my expectations.
                    </button>





                </div>
            </div>
        </div>



        <div class="row">
                <div class="col-md-9">&nbsp;</div>

                <div class="col-md-3 searchBox">

                        <div class="input-group">
                            <input type="text" class="form-control searchGifBar" placeholder="Make a GIF Button!">
                            <span class="input-group-btn">
                                <input class="btn btn-default searchGifButton" type="submit">Create!</button>
                            </span>
                        </div>
                        <!-- /input-group -->
                    </div>
                    </div>

        <div class="row">
            <div class="col-md-9 gifContainer"></div>
            <div class="col-md-3">&nbsp;</div>
        </div>



        
    </div>


    <!-- 
    <script src "./assets/javascript/javascript.js " type="text/javascript"> -->

    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script type="text/javascript">

        var topics = [
            "toronto",
            "beaver",
            "moose",
            "calgary",
            "vancouver",
            "banff",
            "magpie",
            "justin trudeau",
            "william shatner",
            "christopher plummer",
            "wayne gretzky",
            "tim hortons",
            "hockey",
        ]


       function displayGifs() {
            
            var topic = $(this).attr("data-topic");


            //AJAX call to the GIPHY API
            var apiKey = "&api_key=gYeWEAydflUdjPeGj5wfUixxUu4ftX0h&limit=10";
            var queryUrl = "https://api.giphy.com/v1/gifs/search?q=" + topic + apiKey;

            $.ajax({

                url: queryUrl,
                method: "GET"

            }).then(function (response) {
                $(".gifContainer").text(JSON.stringify(response));
          createButtons();
        });
    }
     







function createButtons() {


$(".buttons").empty();


for (var i = 0; i < topics.length; i++) {


  var btn = $("<button>");

  btn.addClass("topic");

  btn.attr("data-topic", topics[i]);
 
  btn.text(topics[i]);

  $(".buttons").append(btn);
}
}


// This function handles events where one button is clicked
$(".searchGifButton").on("click", function(event) {
        event.preventDefault();

        

        // This line grabs the input from the textbox
        var searchTopic = $(".searchGifBar").val().trim();
        console.log(searchTopic);

        // Adding the topics from the textbox to our array
        topics.push(searchTopic);
        console.log(topics);

        // Calling createButtons which handles the processing of our  array
        createButtons();
      });

      // Function for displaying the topic info
      // Using $(document).on instead of $(".topic").on to add event listeners to dynamically generated elements
      $(document).on("click", ".topic", displayGifs);

      // Calling the renderButtons function to display the initial buttons
   createButtons();


// Storing an array of results in the results variable
//var results = response.data;

// Looping over every result item
//for (var i = 0; i < results.length; i++) {

 // Only taking action if the photo has an appropriate rating

 // Creating a div with the class "item"
 //var gifDiv = $("<div class='item'>");

 // Storing the result item's rating
 //var rating = results[i].rating;

 // Creating a paragraph tag with the result item's rating
 //var p = $("<p>").text("Rating: " + rating);

 // Creating an image tag
 //var personImage = $("<img>");

 // Giving the image tag an src attribute of a proprty pulled off the
 // result item
 //personImage.attr("src", results[i].images.fixed_height.url);

 // Appending the paragraph and personImage we created to the "gifDiv" div we created
 //gifDiv.append(p);
 //gifDiv.append(personImage);

 // Prepending the gifDiv to the "#gifs-appear-here" div in the HTML
 //$(".gifContainer").prepend(gifDiv);

//}
 





    </script>



</body>

</html>











          
  